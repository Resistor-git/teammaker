{% extends "layout.html" %}

{% block title %}
    Lobbies
{% endblock title %}

{% block main%}
            
    <!-- TODO: maybe rewrite code to execute it clientside?
    js should take dict/list/cursor object [(game1, users), (game2, users)...] from server and manipulate it
    document.createElement https://youtu.be/x5trGVMKTdY?list=PLhQjrBD2T380xvFSUmToMMzERZ3qB5Ueu&t=4245-->
    


    <!-- <p id="lobby_name"></p>
    <ul id="autoupdated_lobby">
        <li></li>
    </ul> -->

    <div id="lobbies_names">
    </div>

    <!-- stable code -->
    
   {% for game in games_names %}
        <!-- lobby's name -->
        <!-- id is stripped from spaces -->
        <p id={{ game.replace(" ", "") }}>{{ game }}</p>
        <!-- list of players -->
        <ul>
            {% for user in users_in_lobbies_dict[game] %}
                <li>{{ user }}</li>
            {% endfor %}
        </ul>
        <form action="/lobbies" method="POST">
            <input type="hidden" id="game" name="game" value="{{ game }}">  <!-- value= must have both quotes and curly braces -->
            <button class="btn-primary" type="submit">Join lobby</button>
        </form>
        <div>
            <form action="/leave_lobby" method="POST">
                <input type="hidden" id="game" name="game" value="{{ game }}">  <!-- value= must have both quotes and curly braces -->
                <button class="btn-primary" type="submit">Leave lobby</button>
            </form>
        </div>
    {% endfor %}

    <div>
        <form action="/leave_all_lobbies" method="POST">
            <button class="btn-primary" type="submit">Leave all lobbies</button>
        </form>
    </div>

{% endblock main %}